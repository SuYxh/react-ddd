

# âœ… å‰ç«¯ DDD æ¶æ„å¦‚ä½•å®ç°å¤šç«¯å¤ç”¨ï¼ˆPC / App / å°ç¨‹åºï¼‰

> ç›®æ ‡ï¼šä¸åŒç«¯çš„ã€ŒUI æ ·å¼ä¸åŒã€ï¼Œä½†ã€Œä¸šåŠ¡é€»è¾‘ / çŠ¶æ€ / æ•°æ®æ¨¡å‹ / è¡Œä¸ºã€å®Œå…¨å¤ç”¨


## ğŸ§  æ€ç»´åŸåˆ™ï¼šUI å’Œä¸šåŠ¡å½»åº•è§£è€¦

| å±‚çº§                | æ˜¯å¦è·¨ç«¯å¤ç”¨ï¼Ÿ | ç¤ºä¾‹                             | æŠ€æœ¯æ–¹å¼                    |
| ------------------- | -------------- | -------------------------------- | --------------------------- |
| **domain/**         | âœ… 100% å¤ç”¨    | å®ä½“ã€å€¼å¯¹è±¡ã€é¢†åŸŸæœåŠ¡           | æ™®é€š TS æ–‡ä»¶                |
| **application/**    | âœ… 100% å¤ç”¨    | çŠ¶æ€ç®¡ç†ã€æœåŠ¡åè°ƒé€»è¾‘           | Zustand / Redux / Pinia ç­‰  |
| **infrastructure/** | âœ… 100% å¤ç”¨    | æ¥å£è¯·æ±‚ã€æœ¬åœ°ç¼“å­˜ã€Repository   | fetch/axios/localStorage ç­‰ |
| **ui/**             | âŒ ä¸å¤ç”¨       | PC ç”¨ AntDï¼Œå°ç¨‹åºç”¨ Taro        | ç‹¬ç«‹ç»´æŠ¤æ¯ç«¯ç»„ä»¶åº“å®ç°      |
| **å…¥å£å±‚ï¼ˆAppï¼‰**   | âŒ ä¸å¤ç”¨       | ReactDOM vs React Native vs Taro | æŒ‰å¹³å°æ³¨å†Œå¯åŠ¨æ–¹å¼          |


## ğŸ§© å®æˆ˜æ–¹æ¡ˆï¼šé€»è¾‘å¤ç”¨ + UI æ‹†åˆ†

### é¡¹ç›®ç»“æ„å»ºè®®ï¼š

```
src/
â”œâ”€â”€ features/
â”‚   â””â”€â”€ cart/
â”‚       â”œâ”€â”€ domain/                âœ… è·¨ç«¯å¤ç”¨
â”‚       â”œâ”€â”€ application/           âœ… è·¨ç«¯å¤ç”¨
â”‚       â”œâ”€â”€ infrastructure/        âœ… è·¨ç«¯å¤ç”¨
â”‚       â”œâ”€â”€ ui/
â”‚       â”‚   â”œâ”€â”€ pc/                âŒ PCç«¯ UI
â”‚       â”‚   â”œâ”€â”€ mobile/            âŒ Appç«¯ UIï¼ˆReact Nativeï¼‰
â”‚       â”‚   â””â”€â”€ miniapp/           âŒ å°ç¨‹åºç«¯ UIï¼ˆTaroï¼‰
â”œâ”€â”€ shared/                        âœ… é€šç”¨äº‹ä»¶ã€æƒé™ã€å·¥å…·
â”œâ”€â”€ platforms/
â”‚   â”œâ”€â”€ pc/                        â† ReactDOM å¯åŠ¨
â”‚   â”œâ”€â”€ mobile/                    â† React Native å¯åŠ¨
â”‚   â””â”€â”€ miniapp/                   â† Taro å¯åŠ¨
```


## âœ… è·¨ç«¯å…±äº«çš„å†…å®¹

- `Product`ã€`CartItem`ã€`Price` è¿™äº›å®ä½“å’Œæ¨¡å‹
- `DiscountService` ç­‰ä¸šåŠ¡é€»è¾‘
- `useCartService()` ç­‰çŠ¶æ€ç®¡ç†é€»è¾‘ï¼ˆZustand å¯ä»¥ç›´æ¥è·¨å¹³å°ï¼‰
- API æ¥å£è¯·æ±‚é€»è¾‘ï¼ˆaxiosã€fetchã€uni.request éƒ½å¯æŠ½è±¡ä¸ºç»Ÿä¸€æ¥å£å±‚ï¼‰


## ğŸ§  UI å±‚å¦‚ä½•è®¾è®¡å¤ç”¨è¾¹ç•Œï¼Ÿ

### æ–¹æ¡ˆä¸€ï¼šåˆ†ç«¯å°è£… UI ç»„ä»¶ï¼ˆæ¨èï¼‰

æ¯ç«¯ UI ç‹¬ç«‹å°è£…ï¼Œä½†é€»è¾‘é€šè¿‡ props è°ƒç”¨å…±äº« serviceï¼š

```tsx
// pc/ProductList.tsx
export const ProductList = () => {
  const { products, addToCart } = useCartService();
  return <AntdList ... />;
}

// miniapp/ProductList.tsx
export const ProductList = () => {
  const { products, addToCart } = useCartService();
  return <View className='taro-list'>...</View>;
}
```

ä¼˜ç‚¹ï¼šæ¸…æ™°åˆ†ç¦» UI ä¸é€»è¾‘ï¼Œä»»æ„æ¢ç»„ä»¶åº“ä¹Ÿä¸ä¼šå½±å“ä¸šåŠ¡


### æ–¹æ¡ˆäºŒï¼šå¤šç«¯ç»Ÿä¸€ UI ç»„ä»¶ï¼ˆæ¡ä»¶å—é™ï¼‰

- ä½¿ç”¨ `React Native Web` + `react-native-paper` å®ç° Web ä¸ App é€šç”¨
- æˆ–ä½¿ç”¨ `Taro` å°è£…è·¨ç«¯ç»„ä»¶ï¼ˆé€‚åˆå°ç¨‹åºç”Ÿæ€ï¼‰

é™åˆ¶ï¼šå¯¹ UI æ¡†æ¶è¦æ±‚é«˜ï¼Œå¯¹çµæ´»æ€§ä¸å¦‚ç¬¬ä¸€ç§æ–¹æ¡ˆ


## ğŸ“¦ æŠ€æœ¯æ ˆæ¨è

| å¹³å°   | UI                 | å¯åŠ¨æ–¹å¼                        | æ”¯æŒè·¨ç«¯                 |
| ------ | ------------------ | ------------------------------- | ------------------------ |
| PC     | React + Ant Design | ReactDOM.render                 | âœ… æ”¯æŒ DDD æ¨¡å‹          |
| App    | React Native       | `AppRegistry.registerComponent` | âœ… æ”¯æŒ DDD æ¨¡å‹          |
| å°ç¨‹åº | Taro + React       | `Taro.render()`                 | âœ… æ”¯æŒé€»è¾‘å¤ç”¨ï¼ŒUIéœ€é€‚é… |


## ğŸ” å…±äº« Service ç¤ºä¾‹

```ts
// useCartService.ts ï¼ˆé€šç”¨é€»è¾‘ï¼‰
export const useCartService = create((set) => ({
  items: [],
  addToCart: (product) => { ... },
}));
// pc/ProductList.tsx
<button onClick={() => addToCart(product)}>åŠ å…¥è´­ç‰©è½¦</button>

// mobile/ProductList.tsx
<TouchableOpacity onPress={() => addToCart(product)}>+</TouchableOpacity>

// miniapp/ProductList.tsx
<View onClick={() => addToCart(product)}>åŠ å…¥</View>
```


## ğŸ§  æ€»ç»“

| éƒ¨åˆ†                               | æ˜¯å¦è·¨ç«¯å¤ç”¨ | å¦‚ä½•å¤„ç†                                          |
| ---------------------------------- | ------------ | ------------------------------------------------- |
| **é¢†åŸŸæ¨¡å‹ / ä¸šåŠ¡é€»è¾‘ / çŠ¶æ€æœåŠ¡** | âœ…            | ç‹¬ç«‹äº UIï¼Œç»Ÿä¸€å­˜æ”¾åœ¨ `domain/` å’Œ `application/` |
| **æ•°æ®æ¥å£ / ä»“å‚¨**                | âœ…            | ä½¿ç”¨ axiosã€fetchã€æŠ½è±¡ä¸º Repository              |
| **ç»„ä»¶ UI / æ ·å¼**                 | âŒ            | æ¯ç«¯ç‹¬ç«‹ç»´æŠ¤ï¼Œç»„ä»¶åªè°ƒç”¨ service æä¾›çš„æ–¹æ³•       |
| **å…¥å£ä¸æŒ‚è½½æ–¹å¼**                 | âŒ            | æ¯ç«¯è‡ªå®šä¹‰å¯åŠ¨æµç¨‹                                |

